<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8"/>
  <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
  <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>

  <meta name="description" content="포럼을 웹 브라우저 뿐만아니라, 모바일/데스크탑등 다른 기기에서도 사용할 수 있도록 데이터 API를 개발하는 실전 프로젝트다. 개발에 앞서 REST 원칙을 배운다."/>
  <meta name="google-site-verification" content="ToXKBimREnz49pDNot4b-N9ZJgYcKXPPsHsjhg4Zzuc"/>
  <meta name="naver-site-verification" content="7cebcc8e5493169f5401870d9ce57f48d18491cd"/>

  <meta name="msapplication-tap-highlight" content="no"/>

  <!-- Facebook Meta -->
  <meta property="og:title" content="라라벨 5 입문 및 실전 / 44강 - API 기본기 및 기획"/>
  <meta property="og:type" content="Website"/>
  <meta property="og:author" content="appkr (juwonkim@me.com)"/>
  <meta property="og:image" content=""/>

  <!-- Google+ Meta -->
  <meta itemprop="name" content="라라벨 5 입문 및 실전 / 44강 - API 기본기 및 기획">
  <meta itemprop="description" content="포럼을 웹 브라우저 뿐만아니라, 모바일/데스크탑등 다른 기기에서도 사용할 수 있도록 데이터 API를 개발하는 실전 프로젝트다. 개발에 앞서 REST 원칙을 배운다.">
  <meta itemprop="image" content="">
  <meta itemprop="author" content="appkr (juwonkim@me.com)"/>

  <!-- Twitter Meta -->
  <meta name="twitter:card" content="summary"/>
  <meta name="twitter:site" content="@appkrs"/>
  <meta name="twitter:title" content="라라벨 5 입문 및 실전 / 44강 - API 기본기 및 기획"/>
  <meta name="twitter:description" content="포럼을 웹 브라우저 뿐만아니라, 모바일/데스크탑등 다른 기기에서도 사용할 수 있도록 데이터 API를 개발하는 실전 프로젝트다. 개발에 앞서 REST 원칙을 배운다."/>
  <meta name="twitter:image" content=""/>
  <meta name="twitter:domain" content="http://l5.appkr.kr/">

  <!-- Mobile and Rss -->
  <link rel="canonical" href="http://l5.appkr.kr/"/>

  <link rel="stylesheet" href="//fonts.googleapis.com/css?family=Roboto:300,400,500,700"/>
  <link rel="stylesheet" href="//fonts.googleapis.com/earlyaccess/nanumgothic.css"/>
  <link rel="stylesheet" href="//fonts.googleapis.com/icon?family=Material+Icons"/>
  <link rel="stylesheet" href="/css/main.css">

  <title>라라벨 5 입문 및 실전 / 44강 - API 기본기 및 기획</title>

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!--[if lt IE 9]>
  <script src="//oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
  <script src="//oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  <![endif]-->
</head>
<body id="#app">
  <nav class="navbar navbar-fixed-top role="navigation">

  <div class="container-fluid">
    <div class="navbar-header">
      <a href="/" class="navbar-brand">
        <i class="material-icons">school</i>
        라라벨 5 입문 및 실전
      </a>
    </div>
  </div>
</nav>
  <div class="container">
    <div class="row">
      <aside id="sidebar" class="col-md-3">
        <ul>
                      <li  index="0" current-index="46">
              <a href="/lessons/01-welcome.html">1강 - 처음 만나는 라라벨</a>
            </li>
                      <li  index="1" current-index="46">
              <a href="/lessons/02-hello-laravel.html">2강 - 라라벨 5 설치하기</a>
            </li>
                      <li  index="2" current-index="46">
              <a href="/lessons/02-install-on-windows.html">2강 - 라라벨 5 설치하기 (on Windows)</a>
            </li>
                      <li  index="3" current-index="46">
              <a href="/lessons/03-configuration.html">3강 - 글로벌 설정 살펴보기</a>
            </li>
                      <li  index="4" current-index="46">
              <a href="/lessons/04-routing-basics.html">4강 - Routing 기본기</a>
            </li>
                      <li  index="5" current-index="46">
              <a href="/lessons/05-pass-data-to-view.html">5강 - 뷰에 데이터 바인딩하기</a>
            </li>
                      <li  index="6" current-index="46">
              <a href="/lessons/06-blade-101.html">6강 - 블레이드 101</a>
            </li>
                      <li  index="7" current-index="46">
              <a href="/lessons/07-blade-201.html">7강 - 블레이드 201</a>
            </li>
                      <li  index="8" current-index="46">
              <a href="/lessons/08-raw-queries.html">8강 - 날 쿼리 :(</a>
            </li>
                      <li  index="9" current-index="46">
              <a href="/lessons/09-query-builder.html">9강 - 쿼리 빌더</a>
            </li>
                      <li  index="10" current-index="46">
              <a href="/lessons/10-eloquent.html">10강 - 엘로퀀트 ORM</a>
            </li>
                      <li  index="11" current-index="46">
              <a href="/lessons/11-migration.html">11강 - DB 마이그레이션</a>
            </li>
                      <li  index="12" current-index="46">
              <a href="/lessons/12-controller.html">12강 - 컨트롤러</a>
            </li>
                      <li  index="13" current-index="46">
              <a href="/lessons/13-restful-resource-controller.html">13강 - RESTful 리소스 컨트롤러</a>
            </li>
                      <li  index="14" current-index="46">
              <a href="/lessons/14-named-routes.html">14강 - 이름 있는 Route</a>
            </li>
                      <li  index="15" current-index="46">
              <a href="/lessons/15-nested-resources.html">15강 - 중첩된 리소스</a>
            </li>
                      <li  index="16" current-index="46">
              <a href="/lessons/16-authentication.html">16강 - 사용자 인증 기본기</a>
            </li>
                      <li  index="17" current-index="46">
              <a href="/lessons/17-authentication-201.html">17강 - 라라벨에 내장된 사용자 인증</a>
            </li>
                      <li  index="18" current-index="46">
              <a href="/lessons/18-eloquent-relationships.html">18강 - 모델간 관계 맺기</a>
            </li>
                      <li  index="19" current-index="46">
              <a href="/lessons/19-seeder.html">19강 - 데이터 심기</a>
            </li>
                      <li  index="20" current-index="46">
              <a href="/lessons/20-eager-loading.html">20강 - Eager 로딩</a>
            </li>
                      <li  index="21" current-index="46">
              <a href="/lessons/20-1-pagination.html">추가 - 페이징</a>
            </li>
                      <li  index="22" current-index="46">
              <a href="/lessons/21-mail.html">21강 - 메일 보내기</a>
            </li>
                      <li  index="23" current-index="46">
              <a href="/lessons/22-events.html">22강 - 이벤트</a>
            </li>
                      <li  index="24" current-index="46">
              <a href="/lessons/23-validation.html">23강 - 입력 값 유효성 검사</a>
            </li>
                      <li  index="25" current-index="46">
              <a href="/lessons/24-exception-handling.html">24강 - 예외 처리</a>
            </li>
                      <li  index="26" current-index="46">
              <a href="/lessons/25-composer.html">25강 - 컴포저</a>
            </li>
                      <li  index="27" current-index="46">
              <a href="/lessons/26-document-model.html">26강 - Document 모델</a>
            </li>
                      <li  index="28" current-index="46">
              <a href="/lessons/27-document-controller.html">27강 - Document 컨트롤러</a>
            </li>
                      <li  index="29" current-index="46">
              <a href="/lessons/28-cache.html">28강 - Cache</a>
            </li>
                      <li  index="30" current-index="46">
              <a href="/lessons/29-elixir.html">29강 - Elixir, 만병통치약?</a>
            </li>
                      <li  index="31" current-index="46">
              <a href="/lessons/30-final-touch.html">30강 - Debug &amp; Final Touch</a>
            </li>
                      <li  index="32" current-index="46">
              <a href="/lessons/31-forum-features.html">31강 - 포럼 요구사항 기획</a>
            </li>
                      <li  index="33" current-index="46">
              <a href="/lessons/32-login.html">32강 - 사용자 로그인</a>
            </li>
                      <li  index="34" current-index="46">
              <a href="/lessons/33-social-login.html">33강 - 소셜 로그인</a>
            </li>
                      <li  index="35" current-index="46">
              <a href="/lessons/34-role.html">34강 - 사용자 역할</a>
            </li>
                      <li  index="36" current-index="46">
              <a href="/lessons/35-locale.html">35강 - 다국어 지원</a>
            </li>
                      <li  index="37" current-index="46">
              <a href="/lessons/36-models.html">36강 - 마이그레이션과 모델</a>
            </li>
                      <li  index="38" current-index="46">
              <a href="/lessons/37-articles.html">37강 - Article 기능 구현</a>
            </li>
                      <li  index="39" current-index="46">
              <a href="/lessons/38-tags.html">38강 - Tag 기능 구현</a>
            </li>
                      <li  index="40" current-index="46">
              <a href="/lessons/39-attachments.html">39강 - Attachment 기능 구현</a>
            </li>
                      <li  index="41" current-index="46">
              <a href="/lessons/32n33-auth-refactoring.html">32/33 보충 - 인증 리팩토링</a>
            </li>
                      <li  index="42" current-index="46">
              <a href="/lessons/40-comments.html">40강 - Comment 기능 구현</a>
            </li>
                      <li  index="43" current-index="46">
              <a href="/lessons/41-ui-makeup.html">41강 - UI 개선</a>
            </li>
                      <li  index="44" current-index="46">
              <a href="/lessons/42-be-makeup.html">42강 - 서버 사이드 개선</a>
            </li>
                      <li  index="45" current-index="46">
              <a href="/lessons/43-change-note.html">43강 - 변경 사항 알림</a>
            </li>
                      <li class="active" index="46" current-index="46">
              <a href="/lessons/44-api-basic.html">44강 - API 기본기 및 기획</a>
            </li>
                      <li  index="47" current-index="46">
              <a href="/lessons/45-api-big-picture.html">45강 - 기본 구조 잡기</a>
            </li>
                      <li  index="48" current-index="46">
              <a href="/lessons/46-jwt.html">46강 - JWT 를 이용한 인증</a>
            </li>
                      <li  index="49" current-index="46">
              <a href="/lessons/47-dry-refactoring.html">47강 - 중복 제거 리팩토링</a>
            </li>
                      <li  index="50" current-index="46">
              <a href="/lessons/48-all-is-bad.html">48강 - all() is bad</a>
            </li>
                      <li  index="51" current-index="46">
              <a href="/lessons/49-rate-limit.html">49강 - API Rate Limit</a>
            </li>
                      <li  index="52" current-index="46">
              <a href="/lessons/50-id-obfuscation.html">50강 - 리소스 id 난독화</a>
            </li>
                      <li  index="53" current-index="46">
              <a href="/lessons/51-cors.html">51강 - CORS</a>
            </li>
                      <li  index="54" current-index="46">
              <a href="/lessons/52-caching.html">52강 - Caching</a>
            </li>
                      <li  index="55" current-index="46">
              <a href="/lessons/53-partial-response.html">53강 - Partial Response</a>
            </li>
                      <li  index="56" current-index="46">
              <a href="/lessons/54-api-docs.html">54강 - API Documents</a>
            </li>
                      <li  index="57" current-index="46">
              <a href="/lessons/02-install-homestead-osx.html">Homestead 설치 (on Mac)</a>
            </li>
                      <li  index="58" current-index="46">
              <a href="/lessons/02-install-homestead-windows.html">Homestead 설치 (on Windows)</a>
            </li>
                      <li  index="59" current-index="46">
              <a href="/lessons/999-code-release.html">코드 배포</a>
            </li>
                  </ul>
      </aside>

      <div class="col-md-9">
        <article id="article">
                      <nav id="pagination">
  <ul class="pager pager-top">
    <li class="previous ">
      <a href="/lessons/43-change-note.html">
        <span class="pager-title-sm">
          <i class="material-icons">keyboard_arrow_left</i>
        </span>
        <span class="pager-title">
          43강 - 변경 사항 알...
        </span>
      </a>
    </li>
    <li class="next ">
      <a href="/lessons/45-api-big-picture.html">
        <span class="pager-title">
          45강 - 기본 구조 잡...
        </span>
        <span class="pager-title-sm">
          <i class="material-icons">keyboard_arrow_right</i>
        </span>
      </a>
    </li>
  </ul>
</nav>
            <hr/>

            <h1>실전 프로젝트 3 - RESTful API</h1>
<p><strong>&quot;실전 프로젝트 2 - Forum&quot;</strong> 에서 생성된 게시글/댓글을 JSON API 로 외부에 노출하여, 다양한 앱에서 &quot;포럼&quot; 을 이용할 수 있도록 서비스를 확장해 보자.</p>
<h2>44강 - API 기본기 및 기획</h2>
<p>RESTful API 의 이론에 대해 이해하는 시간을 가져보자.</p>
<h3>RESTful API</h3>
<h4>먼저 REST 가 무엇인지 알아보자.</h4>
<ul>
<li><strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer. 대응되는 한국말 번역이 없어, 대부분 &quot;레스트&quot; 라 그냥 읽는다.</li>
<li>HTTP 의 특성을 잘 살려서 사용하는 방법에 대해, 그 창시자들이 제안한 <strong>&quot;이종(異種, heterogeneous) 시스템간의 네트워크 통신 구조&quot;</strong>다. 엄격하게 지켜야 하는 스펙은 아니지만, 남들, 특히 이름만 대면 아는 웹 거물들은 모두 쓰므로 꼭 써야 한다.</li>
<li>RESTful, &quot;레스트&quot; 스러운 HTTP 사용법은 <a href="13-restful-resource-controller.md">13강 - RESTful 리소스 컨트롤러</a> 를 필두로 앞선 실전 프로젝트에서도 계속 사용했었다. 이 강좌를 잘 따라오신 분이라면 알게 모르게 쓰고 있었고 이미 알고 있는 개념이다.</li>
<li>REST 는 <strong>1) Command</strong> <em>(==Method. HEAD/GET, POST, PUT, ...)</em>, <strong>2) Things</strong> <em>(==Resource. articles, comments, ...)</em>, <strong>3) Response</strong> <em>(==Message. 200, 422 등의 HTTP 상태 코드와 text/html, application/json 등의 메시지 본문)</em>, 총 세 가지 큰 덩어리로 구성된다. </li>
</ul>
<h4>(HTTP) API 가 무엇인지 알아보자.</h4>
<ul>
<li>API 는 시스템간의 커뮤니케이션에 사용된다. 가령, 우리가 만든 앱/서비스는 Laravel 에서 제공하는 API (e.g. <code>Route::resource()</code>) 를 이용해서 상호동작한다.</li>
<li>이종(異種) 시스템, 가령 Ruby 로 작성된 라이브러리(==API)를 PHP 에서 쓰려면, 양쪽 언어를 다 아는 번역사, 즉 Wrapping 이 필요하다. 사람 세상이랑 참 비슷하다.</li>
<li>HTTP API 는 서로 다른 시스템간에도 커뮤니케이션을 할 수 있게 한다. 가령, iOS, Android, PC 등 다양한 플랫폼에서 다양한 언어로 구현된 클라이언트가 우리 API 와 데이터를 주고 받을 수 있다. </li>
</ul>
<h4>종합해 보면.</h4>
<p>영어가 공용어인것 처럼, HTTP 가 다양한 시스템에서 워낙 많이 쓰이기 때문에 거의 공용어 처럼 통한다라고 보면 된다. 모두 종합해 보면, <strong>&quot;서로 다른 시스템간에 네트워크를 경유해서 데이터를 교환할 때 HTTP API 라는 것을 이용하는데, 아무렇게나 짜는 게 아니라, 기계 뿐 아니라 사람이 이해하기 쉽도록, 모두가 사용하고 권장하는 형태인 REST 원칙을 따르도록 짠 API&quot;</strong> 가 <strong>&quot;RESTful API&quot;</strong> 인 것이다.</p>
<h3>RESTful API 베스트 프랙티스</h3>
<p>아래는 <a href="http://blog.mwaysolutions.com/2014/06/05/10-best-practices-for-better-restful-api/">10 Best Practices for Better RESTful API</a> 및 필자의 <a href="http://www.slideshare.net/ssuser7887b3/restful-api">RESTful API 제대로 개발하기</a> 를 종합해서 정리한 내용이다. 실전 프로젝트를 진행하면서 하나씩 다시 보겠지만, 여기서 한번 정리하고 필요할 때 마다 돌아와서 잘 지키고 있는지 점검하기 위한 목적으로 나열해 본다.</p>
<ol>
<li>
<p>Resource 는 명사를 쓴다. </p>
<p><a href="13-restful-resource-controller.md">13강 - RESTful 리소스 컨트롤러</a> 에서 배운 내용을 다시 한번 리마인드 하자. 대신 테이블 형태를 약간 바꾸었다. 여기서 Resource 란 클라이언트 사이드에서 보이는 요소인 URI Endpoint 를 의미한다. 물론 URI 뒤에는 모델이 있는데 클라이언트에게 보이진 않는다.</p>
<table>
<thead>
<tr>
<th>Type</th>
<th>Resource</th>
<th>GET(Read)</th>
<th>POST(Store)</th>
<th>PUT(Update)</th>
<th>DELETE(Destroy)</th>
</tr>
</thead>
<tbody>
<tr>
<td>콜렉션</td>
<td>/articles</td>
<td>Article 목록</td>
<td>새 Article 만들기</td>
<td><code>405 MethodNotAllowed</code></td>
<td><code>405 MethodNotAllowed</code></td>
</tr>
<tr>
<td>인스턴스</td>
<td>/articles/{id}</td>
<td>id 를 가진 Article 상세 보기</td>
<td><code>405 MethodNotAllowed</code></td>
<td>id 를 가진 Article 수정</td>
<td>id 를 가진 Article 삭제</td>
</tr>
</tbody>
</table>
<p><strong><code>참고</code></strong> API 에서는 HTML 뷰를 응답하는 경우가 없으므로, 'GET /articles/create', 'GET /articles/{id}/edit', 2 개의 Endpoint 는 필요 없다.</p>
<p><strong><code>ANTI-PATTERN</code></strong> Rosource 이름 (==Endpoint) 에 동사를 쓰지 않는 것이 좋다.</p>
<pre><code>GET /getAllArticles
GET /getArticles?id={id}  
POST /createArticles
POST /updateArticle?id={id}
POST /deleteArticles?id={id}</code></pre>
</li>
<li>
<p>적절한 HTTP 동사 (==Method) 를 사용한다.</p>
<p>Resource 의 상태를 변경할 때는 <code>POST</code>, <code>PUT</code>, <code>DELETE</code> 메소드를 사용한다.</p>
<p><strong><code>ANTI-PATTERN</code></strong> 잘못된 메소드 사용이 불러올 재앙.</p>
<blockquote>
<p>My favorite WTF story is using a GET verb to delete resources. Which was interesting when Google crawled the API. <small>by Jamie Hannaford</small><br>
리소스 삭제를 위한 API Endpoint 를 DELETE 대신 GET 메소드로 정의했다. 구글 검색엔진 크롤러가 방문할 때 마다, 서비스는 안드로메다로 간다.</p>
</blockquote>
</li>
<li>
<p>Resource 이름은 복수를 사용하고, 일관된 대소문자 규칙을 적용할 것을 권장한다.</p>
<p>1 번의 예에서 article 보다는 articles 가 더 낫다. Resource 이름 뿐 아니라, 필드명에서도 Snake case (e.g. snake_case), Camel case (e.g. camelCase), Dash case (e.g. dash-case) 를 일관되게 사용하자. </p>
<pre><code>/article 보다는 /articles
/comment 보다는 /comments</code></pre>
<p><strong><code>ANTI-PATTERN</code></strong> 대소문자 혼용 사례.</p>
<pre><code class="language-javascript">// GET /push_messages
{
  "total": 1540,
  "perPage": 10,
  "current-page": 1,
  "data": ["..."]
}</code></pre>
</li>
<li>
<p>Resource 간 관계를 노출해야 할 경우에는 Resource 를 중첩 (==Nesting) 한다.</p>
<pre><code>GET /tags/{id}/articles</code></pre>
</li>
<li>
<p>복잡한 것들은 모두 물음표 (?) 뒤에 둔다.</p>
<ul>
<li>
<p>필터</p>
<pre><code>GET /articles?filter=notsolved</code></pre>
</li>
<li>
<p>정렬</p>
<pre><code>GET /articles?sort=view_count&amp;direction=asc</code></pre>
</li>
<li>
<p>페이징</p>
<pre><code>GET /articles?page=2</code></pre>
</li>
<li>
<p>필드 선택</p>
<p>모바일에서 트래픽은 곧 사용자의 돈이다. 클라이언트가 꼭 필요한 필드만 요청할 수 있는 방법을 제공하는 것은 좋은 API 디자인이다.</p>
<pre><code>GET /articles?fields=id,title</code></pre>
</li>
</ul>
</li>
<li>
<p>Content/Language Negotiation</p>
<p>응답을 받고자 하는 데이터 형태 (==Content-Type) 와 언어는 HTTP 헤더를 이용해서 주고 받는다.</p>
<pre><code>// Request
GET /articles&lt;br/&gt;
Accept: application/json
Accept-Language: ko-KR</code></pre>
<pre><code>// Response
HTTP/1.1 200 OK
Content-Type: application/json</code></pre>
<p><strong><code>참고</code></strong> Resource 이름 뒤에 확장자를 붙여 Content Negotiation 을 하는 프레임웍도 있다 (e.g. /articles.json, /articles.xml). Anti-pattern 이라고는 할 수 없지만, 이 경우 API Endpoint 자체가 프레임웍에 의존성을 가지게 된다. 가령 /articles.json 을 그대로 두고, 백엔드 프레임웍을 다른 것으로 변경하고자 한다면, 확장자에 따른 Content Negotiation 로직을 별도로 구현해 주어야 한다. </p>
</li>
<li>
<p>하위 또는 관련 리소스를 쉽게 찾을 수 있는 링크를 제공한다. (==HATEOAS)</p>
<p>HTML 의 경우 메뉴나 링크로 다른 페이지로 이동할 수 있는 방법을 제공하고 있다. 반면에, API 는 달랑 데이터만 제공하기 때문에, API 를 사용하는 사람이나 기계가 다음에 무엇을 해야 하고, 어디로 가야할 지 전혀 알 수가 없다. 이를 해결하기 위한 방안으로 제시된 것이 HATEOAS (Hypermedia as the Engine of Application State) 이다.</p>
<pre><code class="language-javascript">// GET /articles
{
  data: [
    {
      id: 1,
      title: "...",
      links: [
        rel: "self",
        href: "http://api.example.com/v1/articles"
      ]
      author: {
        id: 5,
        name: "...",
        links: [
          rel: "self",
          href: "http://api.example.com/v1/users/5"
        ]
      }
    },
    {"..."}
  ]
}</code></pre>
</li>
<li>
<p>API 버전</p>
<p>HTML 페이지의 경우에는 코드 배포만 하면, 사용자는 언제든지 최신 코드를 이용하게 된다. 반면, API 의 경우에는 클라이언트와 서버가 완전히 분리 (==Decoupling) 된다. 즉, 서버 사이드에서 API 를 변경하더라도, 클라이언트는 여전히 <strong>정상적인 동작을 기대하면서</strong> 변경 전 API 를 이용할 수 있다는 의미이다. 점진적 마이그레이션을 위해서 API 버저닝은 꼭 필요하고, 처음에 '/articles' 로 Endpoint 를 만든후, 변경되면 '/v2/articles' 로 가지 말고, 반드시 처음 부터 '/v1/articles' 로 만들 것을 권장한다.</p>
<pre><code>GET http://api.example.com/v1/articles
GET http://example.com/api/v1/articles</code></pre>
</li>
<li>
<p>적절한 HTTP 응답 코드를 사용하자.</p>
<p>꽤 큰 회사/서비스 임에도 불구하고 에러일 경우에도 200 응답 코드를 사용하는 경우를 많이 봤다. HTTP 응답 코드는 괜히 있는 것이 아니며, 200 만 쓰는 것은 REST 원칙에도 어긋난다. 아래는 HTTP API 에서 주로 사용하는 응답 코드이다.</p>
<pre><code>200 - Ok                                // 성공
201 - Created                           // 새로운 리소스 생성 요청에 대한 응답                     
204 - No Content                        // 리소스 삭제 요청 성공 등에 사용
304 - Not Modified                      // 클라이언트에 캐시된 리소스 대비 서버 리소스의 변경이 없을 때 
400 - Bad Request                       // 클라이언트 쪽에서 뭔가 잘못했을 때
401 - Unauthorized                      // 인증 필요 (실제로는 Unauthenticated 의 의미)
403 - Forbidden                         // 권한 부족 (실제로는 Unauthorized 의 의미)
404 - Not Found                         // 요청한 리소스가 없을 때
405 - Method Not Allowed                // 서버에 없는 Endpoint 일 때
406 - Not Acceptable                    // Accept* 헤더 또는 본문의 내용이 수용할 수 없을 경우 
409 - Conflict                          // 기존 리소스와 충돌
410 - Gone                              // 404 가 아니라, 리소스가 삭제되어 응답을 줄 수 없을 경우
422 - Unprocessable Entity,             // 유효성 검사 오류 등에 사용
429 - Too Many Requests,                // Rate Limit 에 걸렸을 경우
500 - Internal Server Error             // 서버 쪽 오류
503 - Service Unavailable               // 점검 등으로 서버가 일시적으로 응답할 수 없는 경우</code></pre>
<p>클라이언트 측 개발자가 잘 이해할 수 있는 에러 내용도 같이 담아 주는 것이 좋다.</p>
<pre><code class="language-javascript">{
  "errors": {
    "code": 422,
    "message": [
      "title": "The title filed is required" 
    ]
    "dict": http://api.example.com/v1/docs#errors422
  }
}</code></pre>
</li>
<li>
<p>HTTP 메소드 오버라이드</p>
<p><a href="13-restful-resource-controller.md">13강 - RESTful 리소스 컨트롤러</a> 에서 이미 설명한 바 있는 내용이다. 모던 브라우저 또는 네트워크 프록시들이 GET, POST 메소드만 이해하기 때문에 PUT, DELETE 메소드를 사용할 때는 <code>_method=put</code> 과 같이 사용해야 한다고.. 라라벨은 <code>X-HTTP-Method-Override</code> HTTP 헤더를 이용한 메소드 오버라이드도 지원한다.</p>
<pre><code>POST /articles
---payload---
_method=PUT&amp;title=...&amp;content=...</code></pre>
<p>or</p>
<pre><code>POST /articles
X-HTTP-Method-Override=PUT
---payload---
title=...&amp;content=...</code></pre>
</li>
</ol>
<h3>어떤 기능을 가질 것인가?</h3>
<ul>
<li>앞서 베스트 프랙티스라고 나열한 기능은 모두 구현해 보자.</li>
<li>기존과 다른 것은 응답의 형태 뿐이다. 앞 강에서 구현한 컨트롤러를 최대한 활용하자.</li>
<li>뷰 뒤에 숨은 데이터가 아니다. 여기서는 데이터가 서비스이다. 데이터 Transform/Serialization 을 지원한다.</li>
<li>JWT (==JSON Web Token) 을 이용한 사용자 인증을 지원한다.</li>
<li>Rate Limit 를 구현한다.</li>
<li>보안 목적으로 Auto-increment ID 를 숨길 것이다.</li>
<li>브라우저 클라이언트를 위해 CORS (Cross Origin Resource Sharing) 기능을 지원한다.</li>
</ul>
<!--@start-->
<hr />
<ul>
<li><a href="../readme.md">목록으로 돌아가기</a></li>
<li><a href="45-api-big-picture.md">45강 - 기본 구조 잡기</a>
<!--@end--></li>
</ul>

            <hr/>

            <nav id="pagination">
  <ul class="pager pager-bottom">
    <li class="previous ">
      <a href="/lessons/43-change-note.html">
        <span class="pager-title-sm">
          <i class="material-icons">keyboard_arrow_left</i>
        </span>
        <span class="pager-title">
          43강 - 변경 사항 알...
        </span>
      </a>
    </li>
    <li class="next ">
      <a href="/lessons/45-api-big-picture.html">
        <span class="pager-title">
          45강 - 기본 구조 잡...
        </span>
        <span class="pager-title-sm">
          <i class="material-icons">keyboard_arrow_right</i>
        </span>
      </a>
    </li>
  </ul>
</nav>                  </article>

        <hr class="divider">

        <div id="comment">
          <div class="comments" style="margin-bottom: 30px;">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//l5lessons.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>

  <!--script id="dsq-count-scr" src="//l5lessons.disqus.com/count.js" async></script-->
</div>        </div>
      </div>
    </div>
  </div>

  <div id="toggler">
    <a href="#" title="Open Menu">
      목록 토글
    </a>
  </div>

  <footer id="footer">
  <div>
    &copy; 2017 &nbsp; <a href="https://github.com/appkr">appkr</a> •
    Built with <a href="http://jigsaw.tighten.co/">Jigsaw</a> •
    Hosted by <a href="https://pages.github.com/">Github</a> •
    <a href="/feed.xml">Rss</a>
  </div>
</footer>

<div id="back-to-top">
  <a href="#" title="Scroll to Top">
    <i class="material-icons">keyboard_arrow_up</i>
  </a>
</div>
  <script src="/js/all.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
        (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-71112324-1', 'auto');
    ga('send', 'pageview');
  </script>
</body>
</html>
